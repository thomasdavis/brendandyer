<!DOCTYPE html>
<html>
<head>
	<title>Thomas Davis - Blog</title>
	<link href="http://alexgorbatchev.com/pub/sh/current/styles/shThemeDefault.css" rel="stylesheet" type="text/css" />
	<link href="http://alexgorbatchev.com/pub/sh/current/styles/shBrushJScript.css" rel="stylesheet" type="text/css" />
	<link href="http://alexgorbatchev.com/pub/sh/current/styles/shBrushXml.css" rel="stylesheet" type="text/css" />
	<link href="http://alexgorbatchev.com/pub/sh/current/styles/shCore.css" rel="stylesheet" type="text/css" />
	<script src="http://alexgorbatchev.com/pub/sh/current/scripts/shCore.js" type="text/javascript"></script>
	<script src="http://alexgorbatchev.com/pub/sh/current/scripts/shAutoloader.js" type="text/javascript"></script>
	<script src="http://alexgorbatchev.com/pub/sh/current/scripts/shBrushJScript.js" type="text/javascript"></script>
	<script src="http://alexgorbatchev.com/pub/sh/current/scripts/shBrushXml.js" type="text/javascript"></script>
	<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.4/jquery.min.js"></script>
	<style type="text/css">
		body, ul { padding: 0; margin: 0; }
		body { font-family: 'Arial'; }
		#container { width: 760px; margin: auto; }
		h1 {  font-size: 3em;  }
		h3 { color: #444; }
		#topmenu {  height: 15px; border-bottom: 1px solid #996699;	padding: 5px; }
		#topmenu ul { list-style: none; }
		#topmenu li { float: left; margin-left: 15px; font-size: 13px;}
	</style>
</head>

<body>
<!--Survey code for sadsa-->
<link rel="stylesheet" type="text/css" href="http://serve.poplytics.com/shadowbox.css">
<script type='text/javascript' src='http://ajax.googleapis.com/ajax/libs/jquery/1.4.4/jquery.min.js'></script>
<script type="text/javascript" src="http://serve.poplytics.com/shadowbox.js"></script>
<script language="javascript" type="text/javascript" src="http://serve.poplytics.com/js/jquery.xdomainajax.js"></script>
<script language="javascript" type="text/javascript">
Shadowbox.init();
$(document).ready(function()
{
$.ajax({
url: 'http://serve.poplytics.com/ads.php?uniq=148408611',
type: 'GET',
success: function(res) {
$('#poplytics').html(res.responseText);
}
});
})
</script>
<div id="poplytics"></div>
<!-- End Survey code for sadsa-->


<div id="topmenu">
	<ul>
	<li><a href="../index.html">home</a></li>
	<li><a href="https://github.com/thomasdavis">my repos</a></li>
	<li><a href="/about.html">about me</a></li>
	<li><a href="http://twitter.com/?status=@iamjessicagomes,%20@neutralthoughts%20is%20a%20great%20guy,%20you%20should%20marry%20him" target="_blank" alt="will load in new window, please marry me">hot woman (SFW)</a></li>
	<li><a href="http://protosal.com" target="_blank">my boot-strapped startup</a></li>
	</ul>
	<ul style="float: right; margin-right: 15px;">
	
	<li>thomas davis - <a href="http://twitter.com/neutralthoughts">follow me on twitter</a> or don't</li>
	</ul>
</div>
<div id="container">


	<article class="blog">
		<div style="width: 385px; margin: auto; margin-top: 50px; "><img src="images/backbone.png" /></div>
		<h2>Backbone.js Tutorial - by noob for noobs</h2>
		<p>The official <a href="http://documentcloud.github.com/backbone/" target="_blank">website</a> describes
		 Backbone.js as a library to supply structure to Javascript heavy 
		web applications.    After using Backbone.js for a week I could never see myself building any sort of
		Javascript functionality regardless of size without using Backbone.js or alternatives.</p>
		<p>I have decided to write a quick introduction for those trying to grasp the mechanics behind it.   I
		  am only a beginner also and would love suggestions and tips to improve my code.</p>
		  <p>
		  I am also very curious to hear what you think about how MVC ties into Javascript development and 
		  the most effective library you have used for logically organizing your Javascript.
		  </p>	
		  <p><strong>Would be great to get a discussion on MVC vs MVVM vs others etc leave comments at the bottom!</strong></p>
		  <p><strong style="text-decoration: italic;">Also could you implement this example better in another framework?</strong></p>
		<h3>Understanding the Model View Controller Paradigm</h3>
		<p>I have used many frameworks which promote that they use MVC.   I don't think I have ever seen
		the same fundamental principals implemented the same way.    </p>
		<p>Backbone.js has 4 classes: Models, Views, Controllers and Collections.   The Models and Collections
		class work hand in hand and when combined essentially make up the M(model) of MVC.
		</p>
		<p>The main concept I follow when using Backbone.js is to make Views listen for changes in the Model and react
		accordingly.   I would recommend bookmarking the homepage <a href="http://documentcloud.github.com/backbone/" target="_blank">
		documentation</a> and I perusing the annotated <a href="http://documentcloud.github.com/backbone/docs/backbone.html" target="_blank">source</a> code.</p>
		<h3>Getting started</h3>
		<p>I am going to run you through a basic tutorial that should get you on the right path if you are a bit lost
		like I was when I started.</p>
		<p>First of all we are going to just setup a basic page and include Backbone.js and Underscore.js(a dependency of Backbone.js)</p>
		<pre class='brush: html js'>
			&lt;!DOCTYPE html>
			&lt;html>
			&lt;head>
				&lt;title>I have a back bone&lt;/title>
			&lt;/head>
			&lt;body>
				&lt;button id="add-friend">Add Friend&lt;/button>
				&lt;ul id="friends-list">
				&lt;/ul>
				&lt;script src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.4/jquery.min.js">&lt;/script>
				&lt;script src="http://ajax.cdnjs.com/ajax/libs/underscore.js/1.1.4/underscore-min.js">&lt;/script>
				&lt;script src="http://ajax.cdnjs.com/ajax/libs/backbone.js/0.3.3/backbone-min.js">&lt;/script>
			&lt;/body>
			&lt;/html>

      </pre>
      <p>For those of you who are lazy the full example can be viewed <a href="http://thomasdavis.github.com/examples/backbone-101/" target="_blank">here</a> and downloaded <a href="https://github.com/thomasdavis/thomasdavis.github.com/tree/master/examples/backbone-101" target="_blank">here</a></p>
		<h3>Setting up the main view</h3>
		<p>Each view has a HTML DOM element associated with it. You can read more about why <a href="http://documentcloud.github.com/backbone/#View-el" target="_blank">here</a>.
		   Because this is our master view we are just going to associate the view with our page body in this example.

		</p><p> If the el(element) specified
		does not exist, Backbone.js will attempt to create it.</p>
		<pre class='brush: js'>
		  (function ($) {
		    window.AppView = Backbone.View.extend({
		      el: $("body"),
		      events: {
		        "click #add-friend":  "showPrompt",
		      },
		      showPrompt: function () {
		        var friend_name = prompt("Who is your friend?");
		      }
		    });
		  var appview = new AppView;
			})(jQuery);
      </pre> 
      <p>So we just wrapped our Backbone code with jQuery to make sure the page has loaded correctly.
      Then we create our main application view by extending Backbone and passing a JSON object with our options.
      We specified "body" to be the associated element for this view.</p>
      <p>The events property is very powerful and lets us attach listeners to our views.   In the example above we have attached 
      a click listener to our button with id "add-friend". Read more about events <a href="http://documentcloud.github.com/backbone/#View-delegateEvents" target="_blank">here.</a></p>
      <p>After we have setup our AppView, we can just call to initiate it at anytime.</p>
     <h3>Collecting the Models</h3>
     <p>A Model in Backbone.js can represent any entity you like and in this case we want it to represent a friend.
     We can easily create friend Models but without any structure they become fairly useless to us because
     we can't iterate through them unless they are grouped together.   So Backbone.js implements the Collection class which 
     allows us to order our models. Read more <a href="http://documentcloud.github.com/backbone/#Collection" target="_blank">here</a>.</p>
     <p>Now we get to the fun part. You can bind listeners/events to Models and Collections.   So whenever there
     are changes to the data we can call events to react accordingly.</p>
     <p>We are going to add this code to our example which lets us add a friend Model to our friend Collection.
     We will then bind a listener to create a new list element when the data has changed.</p>
     <pre class="brush: js">
	(function ($) {
	  
	  Friend = Backbone.Model.extend({
      //Create a model to hold friend atribute
      name: null
    });

    Friends = Backbone.Collection.extend({
      //This is our Friends collection and holds our Friend models
      initialize: function (models, options) {
        this.bind("add", options.view.addFriendLi);
        //Listen for new additions to the collection and call a view function if so
      }
    });

    AppView = Backbone.View.extend({
      el: $("body"),
      initialize: function () {
        this.friends = new Friends( null, { view: this });
        //Create a friends collection when the view is initialized.
        //Pass it a reference to this view to create a connection between the two
      },
      events: {
        "click #add-friend":  "showPrompt",
      },
      showPrompt: function () {
        var friend_name = prompt("Who is your friend?");
        var friend_model = new Friend({ name: friend_name });
        //Add a new friend model to our friend collection
        this.friends.add( friend_model );
      },
      addFriendLi: function (model) {
        //The parameter passed is a reference to the model that was added
        $("#friends-list").append("<li>" + model.get('name') + "</li>");
        //Use .get to receive attributes of the model
      }
    });
    
    var appview = new AppView;
    
	})(jQuery);
		
     </pre>
     <h2><a href="http://thomasdavis.github.com/examples/backbone-101/" target="_blank">Demo</a></h2>
     <h2><a href="https://github.com/thomasdavis/thomasdavis.github.com/tree/master/examples/backbone-101" target="_blank">Source</a></h2>
	<h3>Conclusion</h3>
	<p>
	I hope this helps anyone trying to pick it up.   I don't mind answering any questions that I have the ability to answer.  
	</p><p>
	Would also love to hear to some optimization tips! 
	p.s.  Would love some insight into MVVM, MVC etc
	</p>
	<p>Update: 	Changed the code to append the elements from the view and not the Model/Collection. The <a href="http://news.ycombinator.com/item?id=2158011" target="_blank">problem</a> was described on ycombinator by emehrkay</p>
	<p>Update 2: A user called <a href="http://twitter.com/svenlito" target="_blank">svnlto</a> had a pull request to fix up the example code to implement better coding practises, he was spot on so I merged his request into the master branch. You can view the pull request <a href="https://github.com/thomasdavis/thomasdavis.github.com/pull/1" target="_blank">here</a>.</p>
    <span class="st_twitter_vcount" displayText="Tweet"></span><span class="st_facebook_vcount" displayText="Share"></span><span class="st_email_vcount" displayText="Email"></span><span class="st_sharethis_vcount" displayText="Share"></span>
<script type="text/javascript" src="http://w.sharethis.com/button/buttons.js"></script><script type="text/javascript">stLight.options({publisher:'bdee6d8c-ed9a-4867-90f6-011704c29ee3'});</script>	</article>
	

	<script type="text/javascript">
		SyntaxHighlighter.all()
	</script>
<script>
var idcomments_acct = 'e6c0e0096f8106ea52c674a85b26ecf9';
var idcomments_post_id;
var idcomments_post_url;
</script>
<span id="IDCommentsPostTitle" style="display:none"></span>
<script type='text/javascript' src='http://www.intensedebate.com/js/genericCommentWrapperV2.js'></script>
</div>
<script src="http://static.getclicky.com/js" type="text/javascript"></script>
<script type="text/javascript">try{ clicky.init(66379121); }catch(err){}</script>
<noscript><p><img alt="Clicky" width="1" height="1" src="http://in.getclicky.com/66379121ns.gif" /></p></noscript>
<script type="text/javascript">
document.write(unescape("%3Cscript src='" + ((document.location.protocol=="https:")?"https:":"http:") + "//snapabug.appspot.com/snapabug.js' type='text/javascript'%3E%3C/script%3E"));</script><script type="text/javascript">
SnapABug.addButton('d2559443-bb0f-4ab8-80cc-3ebc411945e6',"0","55%");
</script>
</body>
</html>
